import csv
from datetime import datetime, timedelta

# dumbed down function with one argument
def get_data(date_str):
    filename = "meterusage.csv"
    date = datetime.strptime(date_str, '%Y-%m-%d')
    usage_dict = {}
    with open(filename, 'r') as meterusage_file:
        meterusage_reader = csv.reader(meterusage_file)
        next(meterusage_reader)
        for row in meterusage_reader:
            datetime_obj = datetime.strptime(row[0], '%Y-%m-%d %H:%M:%S')
            if datetime_obj.date() == date.date():
                time = datetime_obj.strftime("%Y-%m-%d %H:%M:%S")
                usage_dict[time] = row[1]
    return str(usage_dict)

# print(get_data('2019-01-02'))
expected_output = "{'2019-01-02 00:00:00': '55.87', '2019-01-02 00:15:00': '55.67', '2019-01-02 00:30:00': '55.43', '2019-01-02 00:45:00': '56.03', '2019-01-02 01:00:00': '56.63', '2019-01-02 01:15:00': '57.51', '2019-01-02 01:30:00': '57.68', '2019-01-02 01:45:00': '57.91', '2019-01-02 02:00:00': '57.71', '2019-01-02 02:15:00': '58.32', '2019-01-02 02:30:00': '58.37', '2019-01-02 02:45:00': '58.27', '2019-01-02 03:00:00': '58.68', '2019-01-02 03:15:00': '58.2', '2019-01-02 03:30:00': '63.06', '2019-01-02 03:45:00': '67.94', '2019-01-02 04:00:00': '68.69', '2019-01-02 04:15:00': '67.62', '2019-01-02 04:30:00': '67.4', '2019-01-02 04:45:00': '68.45', '2019-01-02 05:00:00': '73.29', '2019-01-02 05:15:00': '78.36', '2019-01-02 05:30:00': '102.68', '2019-01-02 05:45:00': '162.75', '2019-01-02 06:00:00': '164.7', '2019-01-02 06:15:00': '151.26', '2019-01-02 06:30:00': '156.94', '2019-01-02 06:45:00': '173.5', '2019-01-02 07:00:00': '180.35', '2019-01-02 07:15:00': '182.95', '2019-01-02 07:30:00': '199.31', '2019-01-02 07:45:00': '221.18', '2019-01-02 08:00:00': '233.64', '2019-01-02 08:15:00': '239.33', '2019-01-02 08:30:00': '252.93', '2019-01-02 08:45:00': '260.4', '2019-01-02 09:00:00': '262.83', '2019-01-02 09:15:00': '261.67', '2019-01-02 09:30:00': '263.98', '2019-01-02 09:45:00': '263.55', '2019-01-02 10:00:00': '261.75', '2019-01-02 10:15:00': '269.27', '2019-01-02 10:30:00': '270.87', '2019-01-02 10:45:00': '268.86', '2019-01-02 11:00:00': '264.86', '2019-01-02 11:15:00': '261.57', '2019-01-02 11:30:00': '259.88', '2019-01-02 11:45:00': '254.46', '2019-01-02 12:00:00': '259.45', '2019-01-02 12:15:00': '262.77', '2019-01-02 12:30:00': '258.37', '2019-01-02 12:45:00': '260.17', '2019-01-02 13:00:00': '258.99', '2019-01-02 13:15:00': '255.46', '2019-01-02 13:30:00': '253.93', '2019-01-02 13:45:00': '252.2', '2019-01-02 14:00:00': '246.99', '2019-01-02 14:15:00': '247.32', '2019-01-02 14:30:00': '248.06', '2019-01-02 14:45:00': '243.94', '2019-01-02 15:00:00': '245.46', '2019-01-02 15:15:00': '246.22', '2019-01-02 15:30:00': '241.72', '2019-01-02 15:45:00': '239.55', '2019-01-02 16:00:00': '240.96', '2019-01-02 16:15:00': '238.41', '2019-01-02 16:30:00': '228.85', '2019-01-02 16:45:00': '227.15', '2019-01-02 17:00:00': '232.01', '2019-01-02 17:15:00': '227.23', '2019-01-02 17:30:00': '206.15', '2019-01-02 17:45:00': '179.32', '2019-01-02 18:00:00': '155.34', '2019-01-02 18:15:00': '138.3', '2019-01-02 18:30:00': '131.47', '2019-01-02 18:45:00': '136.15', '2019-01-02 19:00:00': '178.71', '2019-01-02 19:15:00': '161.46', '2019-01-02 19:30:00': '133.63', '2019-01-02 19:45:00': '126.96', '2019-01-02 20:00:00': '123.07', '2019-01-02 20:15:00': '121.82', '2019-01-02 20:30:00': '144.74', '2019-01-02 20:45:00': '164.83', '2019-01-02 21:00:00': '133.33', '2019-01-02 21:15:00': '114.83', '2019-01-02 21:30:00': '114.96', '2019-01-02 21:45:00': '104.22', '2019-01-02 22:00:00': '73.33', '2019-01-02 22:15:00': '54.19', '2019-01-02 22:30:00': '50.14', '2019-01-02 22:45:00': '49.76', '2019-01-02 23:00:00': '49.61', '2019-01-02 23:15:00': '47.23', '2019-01-02 23:30:00': '46.0', '2019-01-02 23:45:00': '45.97'}"

# ideal function
# def get_data2(start_date, end_date):
#     filename = "meterusage.csv"
#     start = datetime.strptime(start_date, '%Y-%m-%d')
#     end = datetime.strptime(end_date, '%Y-%m-%d')
#     end += timedelta(days=1, minutes=-15)
#     usage_dict = {}
#     with open(filename, 'r') as meterusage_file:
#         meterusage_reader = csv.reader(meterusage_file)
#         next(meterusage_reader)
#         for row in meterusage_reader:
#             datetime_obj = datetime.strptime(row[0], '%Y-%m-%d %H:%M:%S')
#             if datetime_obj >= start and datetime_obj <= end:
#                 usage_dict[datetime_obj] = row[1]
#     return usage_dict